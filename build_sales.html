<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Building some sales</title>

    <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
    <!-- <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script> -->
    <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
    <!-- <script src="firebase_config.js"></script> -->
    <script src="SAQ_db_functions.js"></script>
</head>
<body>
    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyCcaat9ekOpu0m7qZTJ6gblV65DIBeWEbQ",
            authDomain: "saq-fb.firebaseapp.com",
            databaseURL: "https://saq-fb.firebaseio.com",
            projectId: "saq-fb",
            storageBucket: "saq-fb.appspot.com",
            messagingSenderId: "351007329675",
            appId: "1:351007329675:web:241d7fd4d85e789830b38e"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

        // OBJECT DEFINITIONS
        var the_db = firebase.firestore();

        function Sale(buyer, date, total, chairs_arr) {
            this.buyer = buyer;
            this.date = date;
            this.total = total;
            this.chairs = chairs_arr;
        }

        //build an array of Sale objects
        function build_sales_objects() {
            let sale_arr = [];

            let large_chair_array = create_chairs_array();

            sale_arr.push(new Sale('Callie', new Date(), 800, large_chair_array[4]));
            sale_arr.push(new Sale('Emma', new Date(2019, 9, 9), 3725, [large_chair_array[0], large_chair_array[3]]));
            sale_arr.push(new Sale('Joe', new Date(2019, 10, 15), 1000, [large_chair_array[5]]));

            return sale_arr;
        }

        //insert the Sales into the DB
        function insert_sales() {
            //build the sales objects
            let sales_arr = build_sales_objects();

            //call functions that insert the Sales
            for (let i = 0; i < sales_arr.length; i++) {
                insert_sale_to_firestore(sales_arr[i]);
            }
        }

        insert_sales();
    </script>
</body>
</html>