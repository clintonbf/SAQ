<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Your shopping cart</title>
    <script>
        //produce an array of chair objects in the users cart
        // let cart_items = JSON.parse(localStorage.getItem('shopping_cart'));
        let cart_items = JSON.parse(localStorage.getItem('cart_items'));
    </script>
</head>
<body>
    <script>

        // Display the shopping cart contents
        function displayCart() {
            for (let i = 0; i < cart_items.length; i++) {
                let div_tag = document.createElement('div');
                document.body.appendChild(div_tag);
                let main_table = document.createElement('table');
                main_table.setAttribute("border", "solid");
                div_tag.appendChild(main_table);
                let row = document.createElement('tr');
                main_table.appendChild(row);

                //Main table structure is now complete. Add all the relevant details in TDs
                let td_name = document.createElement('td');
                row.appendChild(td_name);
                td_name.innerHTML = cart_items[i].name;
                let cell_chair_price = cart_items[i].price;
                let td_price = document.createElement('td');
                row.appendChild(td_price);
                td_price.innerHTML = "$" + cell_chair_price;
            }
        }

        displayCart();
    </script>

    <div id="cart_summary">   </div>

    <script>
        // Sum total price of all chairs in your cart
        function displayCartTotal() {
            let cartTotal = 0;

            for (let i = 0; i < cart_items.length; i++) {
                cartTotal += cart_items[i].price;
            }

            // Print totals
            let summary_table = document.createElement("table");
            let summary_row = document.createElement("tr");
            summary_table.appendChild(summary_row);

            summary_row.appendChild(document.createElement(("td")));

            let total_field = document.createElement("td");
            summary_row.appendChild(total_field);
            total_field.innerHTML = "$" + cartTotal.toString();

            document.getElementById("cart_summary").appendChild(summary_table);
        }

        displayCartTotal();
    </script>
    <input type="button" value="Checkout" id="checkout">

    <script>
        document.getElementById("checkout").onclick = function() {

        };
    </script>
</body>
</html>